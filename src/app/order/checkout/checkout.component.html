<div class="container">
    <div class="card">
        <form novalidate #checkout="ngForm">
            <h5 class="text-center">Checkout</h5>
            <div class="p-fluid p-formgrid p-grid">
                <div class="p-field p-col-12 p-md-6">
                    <span class="p-float-label">
                        <input 
                                id="firstname" 
                                type="text" 
                                name="firstname" 
                                #firstnameVar="ngModel" 
                                [(ngModel)]="checkoutData.firstname"
                                required
                                [ngClass] = "{
                                    'is-invalid': (firstnameVar.touched || firstnameVar.dirty) && !firstnameVar.valid
                                }" 
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="firstname">Firstname</label>
                        <span class="invalid-feedback">
                            <span *ngIf="firstnameVar.errors?.required">
                                Firstname is required
                            </span>
                        </span>
                    </span>

                </div>
                <div class="p-field p-col-12 p-md-6">
                    <span class="p-float-label">
                        <input 
                                id="lastname" 
                                type="text" 
                                name="lastname"
                                #lastnameVar="ngModel" 
                                [(ngModel)]="checkoutData.lastname"
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (lastnameVar.touched || lastnameVar.dirty) && !lastnameVar.valid
                                }"
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="lastname">Lastname</label>
                        <span class="invalid-feedback">
                            <span *ngIf="lastnameVar.errors?.required">
                                Lastname is required
                            </span>
                        </span>
                    </span>
                    <br>
                </div>
                <div class="p-field p-col-12 p-md-6">
    
                    <span class="p-float-label">
                        <input 
                                id="Email" 
                                type="email" 
                                name="email" 
                                #emailVar="ngModel"
                                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                                [(ngModel)]="checkoutData.email" 
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (emailVar.touched || emailVar.dirty) && !emailVar.valid
                                }"
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="Email">Email</label>
                        <span class="invalid-feedback">
                            <span *ngIf="emailVar.errors?.required">
                                Email ID is required
                            </span>
                            <span *ngIf="emailVar.errors?.pattern">
                                Invalid Email ID
                            </span>
                        </span>
                    </span>
    
                </div>
                <div class="p-field p-col-12 p-md-6">
    
                    <span class="p-float-label">
                        <input 
                                id="Phonenumber" 
                                type="text" 
                                name="phonenumber"
                                pattern="^((\\+91-?)|0)?[0-9]{10}$" 
                                #phonenumberVar="ngModel"
                                [(ngModel)]="checkoutData.phonenumber" 
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (phonenumberVar.touched || phonenumberVar.dirty) && !phonenumberVar.valid
                                }"
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="Phonenumber">Phonenumber</label>
                        <span class="invalid-feedback">
                            <span *ngIf="phonenumberVar.errors?.required">
                                Phonenumber is required
                            </span>
                            <span *ngIf="phonenumberVar.errors?.pattern">
                                Invalid Phonenumber
                            </span>
                        </span>
                    </span>
                </div>
    
                <!-- <textarea rows="5" cols="30" pinputtextarea="" class="p-inputtextarea p-inputtext p-component"></textarea> -->
    
                <div class="p-field p-col-12 mylabel">
                    <label for="address mylabel">Delivery Address</label>
                    <textarea 
                                id="address" 
                                type="text" 
                                name="address" 
                                #addressVar="ngModel"
                                [(ngModel)]="checkoutData.address" 
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (addressVar.touched || addressVar.dirty) && !addressVar.valid
                                }"
                                rows="4" 
                                pinputtextarea
                                class="p-inputtextarea p-inputtext p-component">
                    </textarea>
                    <span class="invalid-feedback">
                        <span *ngIf="addressVar.errors?.required">
                            Delivery address is required
                        </span>
                    </span>
                </div>
                <div class="p-field p-col-12 p-md-3 city">
                    <span class="p-float-label">
                        <input 
                                id="city" 
                                type="text" 
                                name="city" 
                                #cityVar="ngModel"
                                [(ngModel)]="checkoutData.city" 
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (cityVar.touched || cityVar.dirty) && !cityVar.valid
                                }"
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="city">City</label>
                        <span class="invalid-feedback">
                            <span *ngIf="cityVar.errors?.required">
                                City is required
                            </span>
                        </span>
                    </span>
                </div>
                <div class="p-field p-col-12 p-md-3 zip">
                    <span class="p-float-label">
                        <input 
                                id="zip" 
                                type="text" 
                                name="zip" 
                                #zipVar="ngModel"
                                [(ngModel)]="checkoutData.zip" 
                                required 
                                [ngClass] = "{
                                    'is-invalid' : (zipVar.touched || zipVar.dirty) && !zipVar.valid
                                }"
                                class="p-inputtext p-component" 
                                pInputText>
                        <label for="zip">Zip</label>
                        <span class="invalid-feedback">
                            <span *ngIf="zipVar.errors?.required">
                                ZipCode is required
                            </span>
                        </span>
                    </span>
                </div>
                <div class="p-field p-col-4 p-offset-4 ">
                    <p-button    
                                (onClick)="save(checkout)"
                                id="checkout-btn" 
                                [disabled]="(cartService.cartItems$ | async)?.length==0 || checkout.valid==false"
                                [ngClass] = "{
                                    'is-invalid' : !checkout.valid
                                }" 
                                label="Checkout"
                                icon="pi pi-check" 
                                iconPos="left">
                    </p-button>
                    <!-- <button id="checkout-btn" [disabled]="(cartService.cartItems$ | async)?.length==0" type="button" routerLink="/checkout" class="btn btn-primary btn-block">go to checkout</button>  -->
                    <!-- <button id="checkout-btn" [disabled]="(cartService.cartItems$ | async)?.length==0" type="button" routerLink="/checkout" class="btn btn-primary btn-block">go to checkout</button>  -->
                    <!-- <small [hidden]="(cartService.cartItems$ | async)?.length!=0" style="color: red;"
                        id="checkout-btn-help">Cart is Empty, Please add some products & try again...</small> -->
                    <small *ngIf="(cartService.cartItems$ | async)?.length==0" style="color: red; ">
                        Cart is Empty!
                    </small>

                    <!-- <span class="invalid-feedback">
                    <span *ngIf="checkout.valid==false">
                        Kindly Correct Errors
                    </span>
                    </span> -->
                    
                </div>
            </div>
        </form>
    </div>